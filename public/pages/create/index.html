<!doctype html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport"
          content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="./style.css">
    <title>Создание страницы</title>
    <!-- Остальные теги head -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
    <script src="https://cdn.tiny.cloud/1/dcrjk5kydr1vc3qnpxcvawn20glkx6h27tn3acw6b4fr3o34/tinymce/5/tinymce.min.js" referrerpolicy="origin"></script>
    <script>
        tinymce.init({
            selector: 'div#newContent',
            height: '50%', // Высота в процентах от родительского элемента
            width: '90%',
            skin: 'bootstrap',
            content_css: 'material-classic',
            icons: 'boostrap',
            branding: false,
            language: 'ru',  // the name of the language pack file,
            ui_mode: 'split',
            selector: 'textarea',  // change this value according to your HTML

            plugins: ['advlist autolink lists link image charmap print preview anchor', 'searchreplace visualblocks code fullscreen', 'insertdatetime media table paste code help wordcount', 'emoticons'],
            toolbar: 'undo redo | formatselect | bold italic backcolor | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent| emoticons | removeformat | help'
        });

        function createPage() {
            const pageTitle = document.getElementById('pageTitle').value; // Получаем заголовок страницы из поля ввода
            const content = tinymce.get('newContent').getContent();

            // Проверяем, что и заголовок, и контент не пустые
            if (!pageTitle.trim() || !content.trim()) {
                alert('Пожалуйста, введите заголовок и содержимое страницы');
                return;
            }

            // Создаем HTML для новой страницы, вставляя в него заголовок и контент
            const newPageHTML = `
    <!doctype html>
    <html lang="ru">
    <head>
        <meta charset="UTF-8">
        <link href="https://cdn.jsdelivr.net/npm/reset-css@5.0.2/reset.min.css" rel="stylesheet">
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
        <meta name="viewport"
              content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
        <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>${pageTitle}</title>

    </head>
    <body>

        <header>
            <iframe src="../elements/header/header.html" width="100%" height="60px" frameborder="0"></iframe>

        </header>
        <main>
            <h1 class="title" id="p_title">${pageTitle}</h1>
            <div class="m_c">
                <div class="contend">${content}</div>
            </div>

        </main>
        <footer>
            <iframe id="foot" src="../elements/footer/news.html" width="100%"  frameborder="0"></iframe>
        </footer>

        <style>
            @import url('https://fonts.googleapis.com/css2?family=Roboto+Condensed:wght@700&display=swap');
            @import url('https://fonts.googleapis.com/css2?family=Roboto+Condensed&display=swap');
            @import url('https://fonts.googleapis.com/css2?family=Roboto+Condensed:wght@500&display=swap');

            /* Стили для заголовков */
            h1 {
                font-size: 2em;
                font-weight: bold;
                color: #333;
            }

            h2 {
                font-size: 1.5em;
                font-weight: bold;
                color: #444;
            }

            h3 {
                font-size: 1.17em;
                font-weight: bold;
                color: #555;
            }

            /* Стили для цитат */
            blockquote {
                font-style: italic;
                border-left: 2px solid #ccc;
                margin-left: 20px;
                padding-left: 10px;
            }

            /* Стили для списков */
            ul {
                list-style-type: disc;
            }

            ol {
                list-style-type: decimal;
            }

            /* Стили для текста */
            p {
                line-height: 1.5;
                margin-bottom: 15px;
            }

            /* Стили для ссылок */
            a {
                color: #007bff;
                text-decoration: underline;
            }

            /* Пример стилизации таблиц */
            table {
                border-collapse: collapse;
                width: 100%;
            }

            th, td {
                border: 1px solid #ccc;
                padding: 8px;
                text-align: left;
            }

            th {
                background-color: #f2f2f2;
            }

            main{
                width: 85%;
                height: 100%;

                display: flex;
                flex-direction: column;
                justify-content: space-between;

                margin: auto;
            }
            .m_c{
                position: relative;
                width: 100%;
                height: 100%;



            }
            .title{

                font-family: Roboto Condensed;
                font-weight: 700;
                font-size: 200%;
                color: #0094FF;
                margin-left: 2%;

            }
            #foot{
                position: absolute;
                bottom: 0%;
            }
        </style>

    </body>
    </html>

    `;

            // Отправляем на сервер HTML новой страницы
            fetch('/pages', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ content: newPageHTML }) // Отправляем HTML новой страницы
            })
                .then(response => response.text())
                .then(data => alert(data))
                .catch(error => console.error('Ошибка:', error));
        }


    </script>
</head>
<body>
    <main>
        <h1 class="creat">Создание страницы:</h1>


        <textarea id="newContent"></textarea>
        <input type="text" id="pageTitle" placeholder="Заголовок страницы">
        <button class="b2" onclick="createPage()">Создать страницу</button>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-C6RzsynM9kWDrMNeT87bh95OGNyZPhcTNXj1NW7RuBCsyN/o0jlpcV8Qyq46cDfL" crossorigin="anonymous"></script>
    </main>


</body>
</html>


